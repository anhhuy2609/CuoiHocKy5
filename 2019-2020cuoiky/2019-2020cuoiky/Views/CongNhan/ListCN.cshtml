@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
<table border="1">
    <tr>
        <th>Mã công nhân</th>
        <th>Tên công nhân</th>
        <th>Chức năng</th>
    </tr>
    @foreach (var item in ViewBag.listCN)
    {
        <tr>
            <td>@item.MaCongNhan</td>
            <td>@item.TenCongNhan</td>
            <td>
                <a href="/CongNhan/deleteCN?MaCongNhan=@item.MaCongNhan">Delete</a>
                <a href="javascipt:void(0)" class="btn-view">View</a>
                <input type="hidden" class="MaCongNhan" value="@item.MaCongNhan" />
            </td>
        </tr>
    }
</table>
<div class="viewCN"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $(".btn-delete").click(function() {
            var row = $(this).parents('tr');
            row.remove();
        });
    });

    $(document).ready(function (){
        $(".btn-view").click(function() {
            var MaCongNhan = $(".MaCongNhan").val();
            $.ajax({
                url: "/CongNhan/ViewCN/" + MaCongNhan,
                method: "POST",
                success: function(data){
                    $(".viewCN").html(data);
                }
            });
        });
    });

    /*$(document).ready(function () {
        $(".btn-delete").click(function () {
            var row = $(this).parents('tr');
            var MaCongNhan = $(this).parent().find(".MaCongNhan").val();
            $.ajax({
                url: "/CongNhan/deleteCN",
                method: "POST",
                data: {MaCongNhan: MaCongNhan},
                success: function(data) {
                    row.remove();
                }
            });
        });
    });*/
</script>
